<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: false });
        document.addEventListener('DOMContentLoaded', function () {
            const code = `
graph TD
    %% Styling
    classDef frontend fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#01579b;
    classDef backend fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px,color:#2e7d32;
    classDef db fill:#fff3e0,stroke:#ef6c00,stroke-width:2px,color:#ef6c00;
    classDef user fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#7b1fa2;

    %% Nodes
    User(("User / Browser")):::user
    
    subgraph Frontend_Netlify ["Frontend Hosted on Netlify"]
        UI[HTML5 / CSS3 Interface]:::frontend
        JS[Vanilla JS Logic]:::frontend
        Stomp[SockJS / Stomp Client]:::frontend
    end

    subgraph Backend_Render ["Backend Hosted on Render"]
        Controller["Spring Boot Controller"]:::backend
        Broker["Message Broker"]:::backend
        JPA["Spring Data JPA"]:::backend
    end

    subgraph Database_Layer ["Data Layer"]
        Postgres[(PostgreSQL Database)]:::db
    end

    %% Connections
    User <-->|"HTTPS Access"| UI
    UI --> JS
    JS --> Stomp
    Stomp <-->|"WebSocket Connection (WSS)"| Controller
    Controller <-->|"Publish/Subscribe"| Broker
    Controller -->|"Save/Load Data"| JPA
    JPA <-->|"JDBC Connection"| Postgres
`;
            const element = document.querySelector('.mermaid');
            element.textContent = code;
            mermaid.run({ nodes: [element] });
        });
    </script>
    <style>
        body {
            background-color: white;
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
    </style>
</head>

<body>
    <div class="mermaid"></div>
</body>

</html>